[gd_scene load_steps=11 format=3 uid="uid://discv8041v560"]

[ext_resource type="PackedScene" uid="uid://b5js8qs20agaq" path="res://Scenes/wall_segment.tscn" id="1_7ob5s"]
[ext_resource type="PackedScene" uid="uid://gphfo5ll58sk" path="res://Scenes/player.tscn" id="1_lbt4y"]
[ext_resource type="Script" path="res://scripts/wall_segment.gd" id="2_afgnd"]
[ext_resource type="Script" path="res://scripts/spawner_controller.gd" id="5_anlq8"]
[ext_resource type="Script" path="res://scripts/game_manager.gd" id="5_unnun"]
[ext_resource type="PackedScene" uid="uid://b4spig4jnwa4l" path="res://Scenes/Waves/wave_1.tscn" id="6_4ep8a"]
[ext_resource type="Script" path="res://scripts/spawn_boundary.gd" id="7_qqsn7"]
[ext_resource type="PackedScene" uid="uid://1tuh3qo83cvr" path="res://Scenes/Waves/wave_2.tscn" id="7_wfnog"]

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_3vvi4"]
distance = 0.0157233

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7nt7k"]
size = Vector2(178.011, 20)

[node name="Main" type="Node2D"]

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(0, -171)
zoom = Vector2(4, 4)

[node name="PlayerBoundaries" type="Node2D" parent="."]
position = Vector2(1, -211)

[node name="BoundaryLeft" type="StaticBody2D" parent="PlayerBoundaries"]
position = Vector2(-80, 0)

[node name="CollisionShape2D" type="CollisionShape2D" parent="PlayerBoundaries/BoundaryLeft"]
rotation = 1.57304
shape = SubResource("WorldBoundaryShape2D_3vvi4")

[node name="BoundaryRight" type="StaticBody2D" parent="PlayerBoundaries"]
position = Vector2(78, 0)
rotation = -3.14159

[node name="CollisionShape2D" type="CollisionShape2D" parent="PlayerBoundaries/BoundaryRight"]
rotation = 1.57304
shape = SubResource("WorldBoundaryShape2D_3vvi4")

[node name="BoundaryTop" type="StaticBody2D" parent="PlayerBoundaries"]
position = Vector2(-1, -95)
rotation = 1.5708

[node name="CollisionShape2D" type="CollisionShape2D" parent="PlayerBoundaries/BoundaryTop"]
rotation = 1.57304
shape = SubResource("WorldBoundaryShape2D_3vvi4")

[node name="BoundaryBottom" type="StaticBody2D" parent="PlayerBoundaries"]
position = Vector2(-1, 42)
rotation = 4.71236

[node name="CollisionShape2D" type="CollisionShape2D" parent="PlayerBoundaries/BoundaryBottom"]
rotation = 1.57304
shape = SubResource("WorldBoundaryShape2D_3vvi4")

[node name="ChimneySweep" parent="." instance=ExtResource("1_lbt4y")]
position = Vector2(-1, -200)

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]
script = ExtResource("2_afgnd")

[node name="ParallaxLayer" type="ParallaxLayer" parent="ParallaxBackground"]
position = Vector2(0, -255)
motion_mirroring = Vector2(0, 100)

[node name="Wall segment" parent="ParallaxBackground/ParallaxLayer" instance=ExtResource("1_7ob5s")]

[node name="Wall segment2" parent="ParallaxBackground/ParallaxLayer" instance=ExtResource("1_7ob5s")]
position = Vector2(0, 199)

[node name="Wall segment3" parent="ParallaxBackground/ParallaxLayer" instance=ExtResource("1_7ob5s")]
position = Vector2(0, 399)

[node name="GameManager" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("5_unnun")

[node name="Timer" type="Timer" parent="GameManager"]

[node name="Spawner" type="Node2D" parent="."]
position = Vector2(0, 311)
script = ExtResource("5_anlq8")
wave_array = Array[PackedScene]([ExtResource("6_4ep8a"), ExtResource("7_wfnog")])

[node name="SpawnPosLeft" type="Node2D" parent="Spawner"]
position = Vector2(-50, 0)

[node name="SpawnPosRight" type="Node2D" parent="Spawner"]
position = Vector2(50, 0)

[node name="Timer" type="Timer" parent="Spawner"]

[node name="Stones" type="Node2D" parent="Spawner"]

[node name="SpawnBoundary" type="Area2D" parent="."]
unique_name_in_owner = true
script = ExtResource("7_qqsn7")

[node name="CollisionShape2D" type="CollisionShape2D" parent="SpawnBoundary"]
position = Vector2(0, 278)
rotation = -3.13862
shape = SubResource("RectangleShape2D_7nt7k")

[node name="StartRoundButton" type="Button" parent="."]
unique_name_in_owner = true
offset_left = -23.0
offset_top = -246.0
offset_right = 24.0
offset_bottom = -215.0
text = "Start"

[connection signal="round_end_signal" from="GameManager" to="Spawner" method="_on_game_manager_round_end_signal"]
[connection signal="round_start_signal" from="GameManager" to="Spawner" method="_on_game_manager_round_start_signal"]
[connection signal="timeout" from="GameManager/Timer" to="GameManager" method="_on_timer_timeout"]
[connection signal="timeout" from="Spawner/Timer" to="Spawner" method="_on_timer_timeout"]
[connection signal="area_exited" from="SpawnBoundary" to="SpawnBoundary" method="_on_area_exited"]
[connection signal="pressed" from="StartRoundButton" to="GameManager" method="_on_start_round_button_pressed"]
